# `$_REQUEST`
# üßæ PHP Form Example Using `$_REQUEST`

This example demonstrates how to handle form submissions using both `GET` and `POST` methods in PHP by utilizing the `$_REQUEST` superglobal.

---

## üìÅ 1. `form-request.php`

```php
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>PHP Form with $_REQUEST</title>
</head>
<body>

    <h2>GET Method Form</h2>
    <form action="process-request.php" method="GET">
        Username: <input type="text" name="username" value="" /><br />
        Password: <input type="password" name="passwd" value="" /><br />
        <input type="submit" name="submit" value="Login" />
    </form>

    <hr />

    <h2>POST Method Form</h2>
    <form action="process-request.php" method="POST">
        Username: <input type="text" name="username" value="" /><br />
        Password: <input type="password" name="passwd" value="" /><br />
        <input type="submit" name="submit" value="Login" />
    </form>

</body>
</html>
```

---

## üìÅ 2. `process-request.php`

```php
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Process Form</title>
</head>
<body>

    <h2>Form Data Using $_REQUEST</h2>

    <?php
    // Display all data received from $_REQUEST
    echo "<pre>";
    print_r($_REQUEST);
    echo "</pre>";

    // Retrieve individual values from $_REQUEST safely
    $username = $_REQUEST['username'] ?? '';
    $password = $_REQUEST['passwd'] ?? '';

    // Display the submitted form data
    echo "Username: " . htmlspecialchars($username) . "<br />";
    echo "Password: " . htmlspecialchars($password) . "<br />";
    ?>

</body>
</html>
```
---

## üìö Notes: Understanding `$_REQUEST` in PHP

---

### üîπ What is `$_REQUEST` in PHP?

`$_REQUEST` is a **superglobal array** in PHP that contains data from the following sources:

* `$_GET` ‚Äì URL parameters (e.g., `?id=10`)
* `$_POST` ‚Äì Form data submitted via the `POST` method
* `$_COOKIE` ‚Äì Cookies sent by the browser

---

### üîß How `$_REQUEST` Works

When you access:

```php
$_REQUEST['username']
```

PHP will check in this default order:

1. `$_GET['username']`
2. `$_POST['username']`
3. `$_COOKIE['username']`

This order is controlled by the `variables_order` setting in your `php.ini` configuration file.
**Default setting:**

```ini
variables_order = "GPC"
```

---

### ‚ö†Ô∏è Why Be Careful?

Although `$_REQUEST` is convenient, it can be **risky** and cause **ambiguity** in certain situations:

* If both `GET` and `POST` contain a variable with the same name
* When you need to know exactly where the data came from (e.g., for **security**, **validation**, or **routing**)

---

### ‚úÖ Best Practice

It's better to **explicitly use** `$_GET` or `$_POST` instead of `$_REQUEST` when:

* You are dealing with **login forms** or **secure data** ‚Üí use `$_POST`
* You want **clarity and control** in your code
* You want to **avoid ambiguity** between multiple request types

---

### üü¢ When to Use `$_REQUEST`

Use `$_REQUEST` **only if**:

* You don't care whether the data comes from `GET`, `POST`, or `COOKIE`
* You are building a **quick prototype**, **test**, or **demo**

---

### üí° Code Example

```php
// Assume a form sends 'username' via POST or GET
$username = $_REQUEST['username']; // Could be from GET, POST, or COOKIE

// ‚úÖ Better: Use this if the form uses POST
$username = $_POST['username'];
```

---

### üîó Reference

üìñ [PHP Manual: $\_REQUEST](https://www.php.net/manual/en/reserved.variables.request.php)

---
---
# `$_SERVER` 

## üîπ What is `$_SERVER`?

`$_SERVER` is a **PHP superglobal array** that provides detailed information about:

* The **server environment**
* The **client‚Äôs request**
* The **current script execution context**

It contains details like HTTP headers, IP addresses, user-agent strings, server names, and request methods.

---

### üîë Commonly Used `$_SERVER` Keys

| Key                           | Description                            |
| ----------------------------- | -------------------------------------- |
| `$_SERVER['HTTP_USER_AGENT']` | Browser and OS information of the user |
| `$_SERVER['REMOTE_ADDR']`     | Client‚Äôs IP address                    |
| `$_SERVER['REMOTE_PORT']`     | Port number used by the client         |
| `$_SERVER['REQUEST_METHOD']`  | HTTP method (GET, POST, etc.)          |
| `$_SERVER['PHP_SELF']`        | Name of the current script             |
| `$_SERVER['REQUEST_URI']`     | Full URI of the request                |
| `$_SERVER['SERVER_NAME']`     | Host or server name                    |

---

## üß™ PHP Example: Using `$_SERVER` and `$_REQUEST`

---

### üî∏ 1. `server_super_global_var.php`

```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Form - Post/Get ($_REQUEST)</title>
</head>
<body>
    <!-- POST Method Form -->
    <form action="process-server.php" method="POST">
        Username: <input type="text" name="username" value="" /> <br />
        Password: <input type="password" name="passwd" value="" /> <br />
        <input type="submit" name="submit" value="Login" />
    </form>
</body>
</html>
```

---

### üî∏ 2. `process-server.php`

```php
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Process - Server</title>
</head>
<body>
<pre>
<?php
// Uncomment the following line to see complete server information
// print_r($_SERVER);

// Print form data (from $_REQUEST)
print_r($_REQUEST);
?>
</pre>

<?php
// Collect form input
$username = $_REQUEST['username'];
$password = $_REQUEST['passwd'];

// Gather server/client information
$user_agent = $_SERVER['HTTP_USER_AGENT'];  // Client browser info
$user_ipadd = $_SERVER['REMOTE_ADDR'];      // Client IP address
$user_port_no = $_SERVER['REMOTE_PORT'];    // Port number used

// Display submitted info
echo "Username: {$username} <br />";
echo "Password: {$password} <br />";
echo "User Agent: {$user_agent} <br />";
echo "User IP Address: {$user_ipadd} <br />";
echo "User Port Number: {$user_port_no} <br />";
?>
</body>
</html>
```

---

## üîó References

* üìñ [PHP Manual: $\_SERVER](https://www.php.net/manual/en/reserved.variables.server.php)
* üìñ [PHP Manual: $\_REQUEST](https://www.php.net/manual/en/reserved.variables.request.php)

---

# PHP File Upload Using `$_FILES`

This guide demonstrates how to use the `$_FILES` superglobal to upload files in PHP, including validation based on file size and type.

---

## üìå What is `$_FILES`?

When a user uploads a file via an HTML form, PHP stores information in the `$_FILES` array.

### Structure of `$_FILES['file']`:

| Key                | Description                                 |
|--------------------|---------------------------------------------|
| `name`             | Original name of the uploaded file          |
| `type`             | MIME type (provided by the browser, untrusted) |
| `tmp_name`         | Temporary filename of the uploaded file     |
| `error`            | Error code (0 = success)                    |
| `size`             | Size of uploaded file in bytes              |

---

## ‚öô PHP Configuration (php.ini)

Ensure the following directives are set correctly in your `php.ini` file:

Path: `/etc/php/8.2/apache2/php.ini`

```ini
file_uploads = On
upload_max_filesize = 2048M
post_max_size = 2048M
memory_limit = 256M
max_execution_time = 400
max_input_vars = 4000
````

### Restart Apache:

```bash
systemctl restart apache2.service
```

---

## üìÅ Create an Upload Directory

```bash
mkdir -p /var/www/html/php/upload
chown www-data:www-data /var/www/html/php/upload
chmod 755 /var/www/html/php/upload
ls -lh /var/www/html/php/ | grep upload
```

---

## üìù fileupload.php

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>File Upload</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    label {
      display: block;
      margin-top: 10px;
    }
    input[type="submit"] {
      margin-top: 15px;
    }
  </style>
</head>
<body>
  <h2>Upload a File</h2>
  <form action="process-fileupload.php" method="POST" enctype="multipart/form-data">
    <label for="file-name">File Name:</label>
    <input type="text" name="file_name" id="file-name" placeholder="Enter a name for the file" required />
    
    <label for="file-upload">Select File to Upload:</label>
    <input type="file" name="file-upload" id="file-upload" required />
    
    <input type="submit" name="submit" value="Upload" />
  </form>
</body>
</html>
```

---

## ‚öô process-fileupload.php

```php
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Process File Upload</title>
</head>
<body>
  <h2>üì• File Upload Result</h2>

  <pre>
<?php
// Debug: Print form fields
print_r($_POST);
?>
  </pre>

  <pre>
<?php
// Debug: Print uploaded file info
print_r($_FILES);
?>
  </pre>

<?php
if (isset($_FILES['file-upload'])) {
    $file_name      = $_FILES['file-upload']['name'];
    $file_type      = $_FILES['file-upload']['type'];
    $file_tmp_name  = $_FILES['file-upload']['tmp_name'];
    $file_error     = $_FILES['file-upload']['error'];
    $file_size      = $_FILES['file-upload']['size'];
    $file_full_path = $_FILES['file-upload']['full_path'] ?? 'N/A';

    echo "File Name: {$file_name} <br />";
    echo "File Full Path: {$file_full_path} <br />";
    echo "File Type: {$file_type} <br />";
    echo "Temporary Name: {$file_tmp_name} <br />";
    echo "File Error: {$file_error} <br />";
    echo "File Size: {$file_size} bytes <br />";

    $upload_dir = 'upload/';
    $destination = $upload_dir . basename($file_name);

    if ($file_error === UPLOAD_ERR_OK) {
        if (move_uploaded_file($file_tmp_name, $destination)) {
            echo "<p style='color: green;'>‚úî File uploaded successfully!</p>";
        } else {
            echo "<p style='color: red;'>‚úò Error: Failed to move uploaded file.</p>";
        }
    } else {
        echo "<p style='color: red;'>‚úò Upload error code: {$file_error}</p>";
    }
} else {
    echo "<p style='color: red;'>‚úò No file was uploaded.</p>";
}
?>
</body>
</html>
```

---


