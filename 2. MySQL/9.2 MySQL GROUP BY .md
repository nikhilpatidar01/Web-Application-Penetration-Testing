
# 📊 MySQL GROUP BY Clause — Organize, Summarize, Analyze

The `GROUP BY` clause groups rows with identical values in specified columns. It’s often paired with **aggregate functions** like `COUNT()`, `SUM()`, `AVG()`, `MIN()`, and `MAX()` to generate summarized reports.

---

## 🔧 Basic Syntax

```sql
SELECT column1, AGGREGATE_FUNCTION(column2)
FROM table_name
WHERE condition
GROUP BY column1;
```

---

## 🧩 Setting the Context

```sql
USE nikhil_db;
```

Sets the current working database to `nikhil_db`.

---

## 👨‍💻 Sample Table: `users`

| id | name  | gender | course\_name | city\_name |
| -- | ----- | ------ | ------------ | ---------- |
| 1  | Ankit | M      | 2            | 1          |
| 2  | Pooja | F      | 3            | 2          |
| 3  | Ravi  | M      | 2            | 1          |
| 4  | Neha  | F      | 1            | 3          |

---

## 📚 Basic Queries

### View All Users

```sql
SELECT * FROM users;
```

### Filter Users with ID < 16

```sql
SELECT * FROM users WHERE id < 16;
```

---

## 📦 Grouping by Course Name

### 🔹 Group Without Count

```sql
SELECT course_name FROM users GROUP BY course_name;
```

Returns unique course IDs.

### 🔹 Count Users Per Course

```sql
SELECT course_name, COUNT(course_name) AS total_users
FROM users
GROUP BY course_name;
```

### 🔹 Conditional Grouping (IDs < 8)

```sql
SELECT course_name, COUNT(course_name) AS total_users
FROM users
WHERE id < 8
GROUP BY course_name;
```

---

## 🔗 Join with `course` Table

### 🔹 Get Full Course Names via Join

```sql
SELECT course.course_name
FROM users
INNER JOIN course ON users.course_name = course.course_id;
```

### 🔹 Group by Course Name After Join

```sql
SELECT course.course_name
FROM users
INNER JOIN course ON users.course_name = course.course_id
GROUP BY course.course_name;
```

### 🔹 Count Users per Named Course

```sql
SELECT course.course_name, COUNT(course.course_name) AS total_users
FROM users
INNER JOIN course ON users.course_name = course.course_id
GROUP BY course.course_name;
```

---

## 🚻 Grouping by Gender

### 🔹 Unique Genders

```sql
SELECT gender FROM users GROUP BY gender;
```

### 🔹 Count by Gender

```sql
SELECT gender, COUNT(gender) AS total_users
FROM users
GROUP BY gender;
```

### 🔹 Count Female Users

```sql
SELECT gender, COUNT(*) AS total_females
FROM users
WHERE gender = 'F';
```

### 🔹 Count Male Users

```sql
SELECT gender, COUNT(*) AS total_males
FROM users
WHERE gender = 'M';
```

---

## 🌆 Grouping by City (Foreign Key)

### 🔹 Unique City IDs

```sql
SELECT city_name FROM users GROUP BY city_name;
```

### 🔹 Count Users per City ID

```sql
SELECT city_name, COUNT(city_name) AS total_users
FROM users
GROUP BY city_name;
```

### 🔹 Count Male Users per City

```sql
SELECT city_name, COUNT(city_name) AS total_males
FROM users
WHERE gender = 'M'
GROUP BY city_name;
```

---

## 🏙️ Join with `city` Table

### 🔹 Count Users per City Name

```sql
SELECT city.city_name, COUNT(city.city_name) AS total_users
FROM users
INNER JOIN city ON users.city_name = city.city_id
GROUP BY city.city_name;
```

### 🔹 Count Male Users per City Name

```sql
SELECT city.city_name, COUNT(city.city_name) AS total_males
FROM users
INNER JOIN city ON users.city_name = city.city_id
WHERE gender = 'M'
GROUP BY city.city_name;
```

---

## 📌 Summary Table

| Task                    | SQL Feature Used                  | Example Snippet                                             |
| ----------------------- | --------------------------------- | ----------------------------------------------------------- |
| Count per group         | `COUNT(column)`                   | `COUNT(course_name)`                                        |
| Filter before grouping  | `WHERE` clause                    | `WHERE id < 10`                                             |
| Filter after grouping   | `HAVING` clause (not shown above) | `HAVING COUNT(*) > 5`                                       |
| Combine multiple tables | `JOIN`                            | `INNER JOIN course ON users.course_name = course.course_id` |
| Rename output columns   | `AS` aliasing                     | `COUNT(*) AS total_users`                                   |

---

## 🧠 Pro Tips

* Use `HAVING` for **post-group filtering** (e.g., groups with more than X records).
* Aggregate functions **ignore NULLs** (except `COUNT(*)`).
* Combine `GROUP BY` with `ORDER BY` for clean reports.
* Always alias aggregate columns (`AS total`, `AS count`) for readability.

---

