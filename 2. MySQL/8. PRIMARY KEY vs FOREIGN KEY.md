
# 🔑 PRIMARY KEY vs FOREIGN KEY (SQL Constraints)

---

## ✅ PRIMARY KEY

🔹 **Purpose**: Uniquely identifies each record
🔹 Must be: `UNIQUE` + `NOT NULL`
🔹 One per table (can be composite)

### 📌 Syntax (CREATE TABLE)

```sql
CREATE TABLE users (
  id INT NOT NULL AUTO_INCREMENT,
  name VARCHAR(255),
  PRIMARY KEY (id)
);
```

### 📌 Syntax (ALTER TABLE)

```sql
ALTER TABLE users ADD PRIMARY KEY (id);
```

---

## 🔗 FOREIGN KEY

🔹 Refers to `PRIMARY KEY` of another table
🔹 Maintains **referential integrity**
🔹 Child table → references → Parent table

### 📌 Syntax (CREATE TABLE)

```sql
CREATE TABLE orders (
  order_id INT PRIMARY KEY,
  user_id INT,
  FOREIGN KEY (user_id) REFERENCES users(id)
);
```

### 📌 Syntax (ALTER TABLE)

```sql
ALTER TABLE orders ADD FOREIGN KEY (user_id) REFERENCES users(id);
```

---

## 🔥 Full Example with 2 Foreign Keys

### 🎓 Create Parent Tables

```sql
CREATE TABLE course (
  course_id INT AUTO_INCREMENT PRIMARY KEY,
  course_name VARCHAR(255)
);

CREATE TABLE city (
  city_id INT AUTO_INCREMENT PRIMARY KEY,
  city_name VARCHAR(255)
);
```

### 🧑‍🎓 Create Child Table (users)

```sql
CREATE TABLE users (
  id INT AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(255) NOT NULL,
  age INT NOT NULL,
  gender VARCHAR(1),
  email VARCHAR(255) UNIQUE NOT NULL,
  course_name INT NOT NULL,
  city_name INT NOT NULL,
  FOREIGN KEY (course_name) REFERENCES course(course_id),
  FOREIGN KEY (city_name) REFERENCES city(city_id)
);
```

### 📥 Insert Data into Parent Tables

```sql
INSERT INTO course (course_name)
VALUES ('InfoSec'), ('Ethical Hacking'), ('Forensics');

INSERT INTO city (city_name)
VALUES ('Indore'), ('Bhopal'), ('Ujjain');
```

### 📤 Insert Data into users

```sql
INSERT INTO users (name, age, gender, email, course_name, city_name)
VALUES ('Aman', 22, 'M', 'aman@armour.com', 2, 1);
```

---

## ❗ Notes to Remember

| Rule                                   | Description                   |
| -------------------------------------- | ----------------------------- |
| ✅ Only 1 Primary Key per table         | Can be single or composite    |
| ❌ Can’t insert invalid foreign key     | Parent value **must exist**   |
| 🔐 FK maintains data link              | Auto blocks inconsistent data |
| 👀 Use `SHOW CREATE TABLE table_name;` | To see all constraints        |

---

