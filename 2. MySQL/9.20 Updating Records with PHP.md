

## ðŸ“Œ **Creating Records with PHP**

* **`creating-records.php`** â€“ Hardcoded insert using `mysqli` connection.
* **`creating-records-2.php`** â€“ HTML form to collect new student data.
* **`creating-records-process.php`** â€“ Processes form data and inserts it into the database using prepared statements.

---

## ðŸ“Œ **Updating Records with PHP**

* **`update-records.php`** â€“ Hardcoded update using `mysqli` and `prepared statements`.
* **`update-records2.php`** â€“ HTML form for manually entering data to be updated.
* **`update-records-process.php`** â€“ Processes form data and updates the database securely.
* **`update-records3.php`** â€“ Auto-filled form using student `id` from URL, useful for edit pages.

---

### âœ… `update-records.php`

```php
<?php
// 1. Create a database connection
$dbhost = 'localhost';
$dbuser = 'root';
$dbpass = 'root';
$dbname = 'nikhil_db';

$connection = mysqli_connect($dbhost, $dbuser, $dbpass, $dbname);

// Test if connection occurred
if (mysqli_connect_errno()) {
    die("Database Connection Failed: " . mysqli_connect_error());
}
?>

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Update Records with PHP</title>
</head>
<body>

<h1>Update Records with PHP</h1>

<?php
// 2. Prepare the update query using a prepared statement
$student_id = 6;
$student_name = "user3";

$query = "UPDATE student SET name = ? WHERE id = ?";
$stmt = mysqli_prepare($connection, $query);

if ($stmt) {
    // 3. Bind parameters (s = string, i = integer)
    mysqli_stmt_bind_param($stmt, "si", $student_name, $student_id);

    // 4. Execute the statement
    if (mysqli_stmt_execute($stmt)) {
        echo "<p style='color:green;'>Record updated successfully!</p>";
    } else {
        echo "<p style='color:red;'>Execution failed: " . mysqli_stmt_error($stmt) . "</p>";
    }

    // 5. Close the statement
    mysqli_stmt_close($stmt);
} else {
    die("Statement preparation failed: " . mysqli_error($connection));
}
?>

</body>
</html>

<?php
// 6. Close the database connection
mysqli_close($connection);
?>
```

---

#### Run on Browser
```
http://192.168.94.145/php/update-records.php 
```
#### Output
```
Update Records with PHP
Record updated successfully!
```
---

### âœ… `update-records2.php`

```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Update Records with PHP</title>
</head>
<body>

<h1>Update Records with PHP</h1>

<form action="update_records_process.php" method="POST">
    <p>
        <label for="student_id">ID:</label>
        <input type="number" id="student_id" name="student_id" required />
    </p>

    <p>
        <label for="student_name">Name:</label>
        <input type="text" id="student_name" name="student_name" required />
    </p>

    <p>
        <label for="student_age">Age:</label>
        <input type="number" id="student_age" name="student_age" required />
    </p>

    <p>
        Gender:<br>
        <input type="radio" id="male" name="student_gender" value="M" required />
        <label for="male">Male</label>
        <input type="radio" id="female" name="student_gender" value="F" />
        <label for="female">Female</label>
    </p>

    <p>
        <label for="student_email">Email:</label>
        <input type="email" id="student_email" name="student_email" required />
    </p>

    <p>
        <label for="student_percentage">Percentage:</label>
        <input type="number" id="student_percentage" name="student_percentage" step="0.01" required />
    </p>

    <p>
        <input type="submit" name="submit" value="Save" />
    </p>
</form>

</body>
</html>
```

---

### âœ…  `update-records-process.php`

```php
<?php
// 1. Create a database connection
$dbhost = "localhost";
$dbuser = "root";
$dbpass = "root";
$dbname = "nikhil_db";

$connection = mysqli_connect($dbhost, $dbuser, $dbpass, $dbname);

// Test if connection occurred
if (mysqli_connect_errno()) {
    die("Database Connection Failed: " . mysqli_connect_error());
}

// 2. Collect POST data safely
$student_id = $_POST['student_id'] ?? "";
$student_name = $_POST['student_name'] ?? "";
$student_age = $_POST['student_age'] ?? "";
$student_gender = $_POST['student_gender'] ?? "";
$student_email = $_POST['student_email'] ?? "";
$student_percentage = $_POST['student_percentage'] ?? "";

// 3. Basic validation
if (
    empty($student_id) || empty($student_name) || empty($student_age) ||
    empty($student_gender) || empty($student_email) || empty($student_percentage)
) {
    die("All fields are required.");
}

// 4. Prepare and bind
$query = "UPDATE student SET name = ?, age = ?, gender = ?, email = ?, percentage = ? WHERE id = ?";
$stmt = mysqli_prepare($connection, $query);

if ($stmt) {
    mysqli_stmt_bind_param(
        $stmt,
        "sisssi",
        $student_name,
        $student_age,
        $student_gender,
        $student_email,
        $student_percentage,
        $student_id
    );

    // 5. Execute and check result
    if (mysqli_stmt_execute($stmt)) {
        echo "<h2 style='color:green;'>Record updated successfully!</h2>";
    } else {
        echo "<h2 style='color:red;'>Failed to update record: " . mysqli_stmt_error($stmt) . "</h2>";
    }

    mysqli_stmt_close($stmt);
} else {
    echo "<h2 style='color:red;'>Failed to prepare the statement: " . mysqli_error($connection) . "</h2>";
}

// 6. Close the connection
mysqli_close($connection);
?>
```

---


### âœ… `update-record-3.php` 
```php
<?php
// 1. Create a database connection
$dbhost = 'localhost';
$dbuser = 'root';
$dbpass = 'root';
$dbname = 'nikhil_db';

$connection = mysqli_connect($dbhost, $dbuser, $dbpass, $dbname);

if (mysqli_connect_errno()) {
    die("Database Connection Failed: " . mysqli_connect_error());
}

// 2. Get the ID from URL GET parameter
$student_id = $_GET['id'] ?? "";
if (!is_numeric($student_id) || $student_id <= 0) {
    die("Invalid or missing student ID.");
}

// 3. Query the student record
$query = "SELECT id, name, age, gender, email, percentage FROM student WHERE id = '$student_id'";
$result = mysqli_query($connection, $query);

if (!$result || mysqli_num_rows($result) === 0) {
    die("Student record not found.");
}

$row = mysqli_fetch_assoc($result);
?>

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Update Record with PHP</title>
</head>
<body>

<h1>Update Student Record</h1>

<form action="update-records-process-2.php" method="POST">
    ID: <input type="text" name="student_id" value="<?php echo htmlspecialchars($row['id']); ?>" readonly /><br />

    NAME: <input type="text" name="student_name" value="<?php echo htmlspecialchars($row['name']); ?>" required /><br />

    AGE: <input type="number" name="student_age" value="<?php echo htmlspecialchars($row['age']); ?>" required /><br />

    GENDER:
    <input type="radio" id="male" name="student_gender" value="M" <?php if ($row['gender'] == "M") echo "checked"; ?> />
    <label for="male">Male</label>

    <input type="radio" id="female" name="student_gender" value="F" <?php if ($row['gender'] == "F") echo "checked"; ?> />
    <label for="female">Female</label><br />

    EMAIL: <input type="email" name="student_email" value="<?php echo htmlspecialchars($row['email']); ?>" required /><br />

    PERCENTAGE: <input type="number" name="student_percentage" step="0.01" value="<?php echo htmlspecialchars($row['percentage']); ?>" required /><br />

    <input type="submit" name="submit" value="Save" />
</form>

</body>
</html>

<?php
// 4. Close connection
mysqli_close($connection);
?>
```

---

### âœ… Now visit:

```
http://192.168.94.145/php/update-record-3.php?id=7
```

---




### âœ…  `update-records-process.php`

```php
<?php
// 1. Create a database connection
$dbhost = 'localhost';
$dbuser = 'root';
$dbpass = 'root';
$dbname = 'nikhil_db';

$connection = mysqli_connect($dbhost, $dbuser, $dbpass, $dbname);

if (mysqli_connect_errno()) {
    die("Database Connection Failed: " . mysqli_connect_error());
}

// 2. Collect POST data and basic validation
$student_id = $_POST['student_id'] ?? "";
$student_name = $_POST['student_name'] ?? "";
$student_age = $_POST['student_age'] ?? "";
$student_gender = $_POST['student_gender'] ?? "";
$student_email = $_POST['student_email'] ?? "";
$student_percentage = $_POST['student_percentage'] ?? "";

// Validate numeric fields
if (
    !is_numeric($student_id) ||
    !is_numeric($student_age) ||
    !is_numeric($student_percentage)
) {
    die("Invalid numeric input.");
}

// Optional: You can also validate email format here if needed

// 3. Prepare and execute the query securely
$query = "UPDATE student SET name = ?, age = ?, gender = ?, email = ?, percentage = ? WHERE id = ?";
$stmt = mysqli_prepare($connection, $query);

if (!$stmt) {
    die("Prepared Statement Failed: " . mysqli_error($connection));
}

mysqli_stmt_bind_param(
    $stmt,
    "sisssi",
    $student_name,
    $student_age,
    $student_gender,
    $student_email,
    $student_percentage,
    $student_id
);

$result = mysqli_stmt_execute($stmt);

if (!$result) {
    die("Database Update Failed: " . mysqli_stmt_error($stmt));
}
?>

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Update Success</title>
</head>
<body>
    <h1 style="color:green;">Student record updated successfully.</h1>
    <a href="update-record-3.php?id=<?php echo htmlspecialchars($student_id); ?>">Back to Edit</a>
</body>
</html>

<?php
// 4. Close statement and connection
mysqli_stmt_close($stmt);
mysqli_close($connection);
?>
```

---




