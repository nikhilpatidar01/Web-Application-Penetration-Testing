# `$_COOKIE`

# 🍪 PHP Cookies and `$_COOKIE` Superglobal 

A **cookie** in web development is a small piece of data sent by a server to a user's web browser. The browser stores it and sends it back with future requests to the same server.

### 🔹 Use Cases for Cookies:

* Remembering user preferences
* Keeping users logged in
* Tracking user activity (e.g., analytics, shopping carts)

---

## 🔧 How Cookies Work in PHP

### 1. Set a Cookie

You can set a cookie using `setcookie()` **before any HTML output**:

```php
setcookie("name", "value", time() + 3600); // Expires in 1 hour
```

### 2. Access a Cookie

All cookies are available via the `$_COOKIE` superglobal:

```php
echo $_COOKIE['name'];
```

### 3. Delete a Cookie

Set the cookie with an **expiration time in the past**:

```php
setcookie("name", "", time() - 3600);
```

---

## 🛠️ `setcookie()` Parameters

```php
setcookie(
    string $name,
    string $value = "",
    int $expires_or_options = 0,
    string $path = "",
    string $domain = "",
    bool $secure = false,
    bool $httponly = false
);
```

| Parameter   | Description                                                             |
| ----------- | ----------------------------------------------------------------------- |
| `$name`     | The name of the cookie                                                  |
| `$value`    | The value to store                                                      |
| `$expires`  | Expiration timestamp (`time() + seconds`)                               |
| `$path`     | Path on the server where the cookie is available (`"/"` is most common) |
| `$domain`   | Domain that the cookie is available to                                  |
| `$secure`   | Only send the cookie over HTTPS                                         |
| `$httponly` | Cookie only accessible via HTTP (not JavaScript), improves security     |

> ✅ **Note:** Cookies must be set before **any output**, or use output buffering.
> 🔁 Cookies set now are available on the **next request**, not immediately.

---

## 🔍 Safe Cookie Check

Use `isset($_COOKIE['key'])` before accessing a cookie to avoid warnings.

---

## 🔄 Real-World Uses

* User login info
* Language preferences
* Cart items or sessions
* Analytics tracking

---

## 🧪 Examples

### ✅ `cookies.php` – Set and Display Cookie

```php
<?php
$cookie_name = "user";
$cookie_value = "123456789";
$cookie_expire = time() + (60 * 60 * 24 * 7); // 7 days
setcookie($cookie_name, $cookie_value, $cookie_expire);
?>
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Cookies</title>
</head>
<body>
<pre>
<?php print_r($_COOKIE); ?>
</pre>
<?php
echo isset($_COOKIE['user']) ? $_COOKIE['user'] : 'Cookie not set yet.';
?>
</body>
</html>
```

---

### ✅ `cookies2.php` – Cookie with More Options

```php
<?php
$cookie_name = "user";
$cookie_value = "123456789";
$cookie_expire = time() + (60 * 60 * 24 * 7);
$cookie_path = "/";
$cookie_domain = "";
$cookie_secure = false;
$cookie_httponly = true;

setcookie(
    $cookie_name,
    $cookie_value,
    $cookie_expire,
    $cookie_path,
    $cookie_domain,
    $cookie_secure,
    $cookie_httponly
);
?>
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Cookies</title>
</head>
<body>
<pre>
<?php print_r($_COOKIE); ?>
</pre>
<?php
echo isset($_COOKIE['user']) ? $_COOKIE['user'] : 'Cookie not set yet.';
?>
</body>
</html>
```

---

## 🔐 `cookies-3.php` – Login and Set Cookie

```php
<?php
if (isset($_POST['submit'])) {
    $username = $_POST['username'];
    $password = $_POST['passwd'];
    if ($username === "admin" && $password === "admin-123") {
        setcookie("user", "123456789", time() + (60 * 60 * 24 * 7));
        echo "Login successful. <a href='view_cookies.php'>View Cookies</a>";
    } else {
        echo "There was an error.";
    }
} else {
    echo "Please log in.";
}
?>
```

---

## 📂 `view_cookies.php` – View Set Cookies

```php
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>View Cookies</title>
</head>
<body>
<?php
echo isset($_COOKIE['user']) ? "User cookie: " . $_COOKIE['user'] : "User cookie not set.";
?>
</body>
</html>
```

---

## ⚙️ `cookies_3.php` – Set Admin Cookie + Display Both

```php
<?php
setcookie("admin", "112233445566", time() + (60 * 60)); // 1 hour
?>
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Set Cookies</title>
</head>
<body>
<pre>
<?php print_r($_COOKIE); ?>
</pre>
<?php
echo "User: " . ($_COOKIE['user'] ?? 'Not set') . "<br />";
echo "Admin: " . ($_COOKIE['admin'] ?? 'Not set') . "<br />";
?>
</body>
</html>
```

---

## ❌ Deleting (Unsetting) Cookies

### ❌ Wrong Way:

```php
unset($_COOKIE['user']);
unset($_COOKIE['admin']);
```

> This only removes it from PHP's memory, **not the browser**.

---

### ✅ Right Way (Expire Cookie):

```php
setcookie('user', null, time() - 3600);
setcookie('admin', null, time() - 3600);
```

---

## 🧹 `unset_cookie.php` – Complete Cookie Removal

```php
<?php
setcookie('user', null, time() - 3600);
setcookie('admin', null, time() - 3600);
?>
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Unset Cookie</title>
</head>
<body>
<h2>Cookies 'user' and 'admin' have been unset.</h2>
<p><a href="view_cookies.php">Check cookies</a></p>
</body>
</html>
```

---

## 📌 Final Notes

* Always call `setcookie()` **before any HTML or echo**.
* Use developer tools or a dedicated script to inspect browser cookies.
* For better security, use `httponly` and `secure` flags when applicable.
* Cookies become available on the **next request** — not immediately after setting.

---

