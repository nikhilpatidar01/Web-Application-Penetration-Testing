
# ‚úÖ PHP Form Validation

Validating form input is crucial to ensure **data quality**, **security**, and **consistency** in web applications. PHP offers a variety of validation techniques to verify:

* Presence
* String Length
* Type
* Inclusion in a Set
* Uniqueness
* Format (email, phone, regex)

---

## üîç Common Validation Checks in PHP

Let's break down each validation type, why it's important, and how to implement it in PHP.

---

### 1. ‚úÖ Presence Check

**Description:**
Ensures that the input exists and is not empty.

```php
$value = trim($_POST['username'] ?? '');

if (!isset($value) || $value === "") {
    echo "Validation Failed: Presence check!";
}
```

---

### 2. üî† String Length Check

**Description:**
Ensures the input meets min/max length constraints.

```php
$value = "abc";

// Minimum Length
$min = 4;
if (strlen($value) < $min) {
    echo "Validation Failed: Minimum length ($min)";
}

// Maximum Length
$max = 10;
if (strlen($value) > $max) {
    echo "Validation Failed: Maximum length ($max)";
}
```

---

### 3. üî¢ Type Check

**Description:**
Verifies the data type is as expected.

```php
$value = 123;

if (!is_string($value)) {
    echo "Validation Failed: Expected a string!";
}
```

---

### 4. ‚úÖ Inclusion in a Set

**Description:**
Checks if the value exists within an allowed set.

```php
$value = "green";
$allowed_colors = ["red", "blue", "green", "yellow"];

if (!in_array($value, $allowed_colors)) {
    echo "Validation Failed: Value not allowed!";
}
```

---

### 5. üîê Uniqueness Check (via Database)

**Description:**
Ensures the value (e.g., username or email) is unique. Requires DB lookup.

```php
$username = "newuser";

$pdo = new PDO("mysql:host=localhost;dbname=testdb", "root", "");
$stmt = $pdo->prepare("SELECT COUNT(*) FROM users WHERE username = ?");
$stmt->execute([$username]);
$count = $stmt->fetchColumn();

if ($count > 0) {
    echo "Validation Failed: Username already exists!";
}
```

---

### 6. üìß Format Check (Email, Phone, Regex)

#### Email Validation

```php
$email = "test@example.com";

if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
    echo "Validation Failed: Invalid email format!";
}
```

#### Phone Number (digits-only)

```php
$phone = "1234567890";

if (!preg_match("/^[0-9]{10}$/", $phone)) {
    echo "Validation Failed: Invalid phone number!";
}
```

#### Custom Regex (Username)

```php
$username = "john_doe";

if (!preg_match("/^[a-zA-Z0-9_]+$/", $username)) {
    echo "Validation Failed: Invalid username format!";
}
```

---

## üß† Best Practices for Validation

* ‚úÖ Sanitize data using `trim()`, `htmlspecialchars()`, etc.
* ‚úÖ Use **functions** to centralize validation logic.
* ‚úÖ Rely on PHP built-in filters like `filter_var()`.
* ‚úÖ Always validate on both client-side (JS) and server-side (PHP).
* ‚ùå Avoid type-juggling vulnerabilities (`==` vs `===`).

---

## üõ†Ô∏è Example: Combining Validations in Functions

```php
function validatePresence($value) {
    return isset($value) && trim($value) !== "";
}

function validateLength($value, $min, $max) {
    $length = strlen($value);
    return ($length >= $min && $length <= $max);
}

function validateEmail($email) {
    return filter_var($email, FILTER_VALIDATE_EMAIL);
}

// Sample usage
$email = "test@example.com";

if (!validatePresence($email)) {
    echo "Email is required.";
} elseif (!validateLength($email, 5, 50)) {
    echo "Email length is invalid.";
} elseif (!validateEmail($email)) {
    echo "Invalid email format.";
} else {
    echo "All validations passed!";
}
```

---

## üíª Example Script:
```
validation.php
```

```php
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Validation</title>
</head>
<body>
<?php
// Presence check
$value = "";
if (!isset($value) || empty($value)) {
    echo "Validation Failed: Presence <br />";
}

// String Length
$value = "abc";
$min = 4;
$max = 15;

if (strlen($value) < $min) {
    echo "Validation Failed: Min Length <br />";
}

if (strlen($value) > $max) {
    echo "Validation Failed: Max Length <br />";
}

// Type check
$value = "";
if (!is_string($value)) {
    echo "Validation Failed: Type <br />";
}

// Inclusion in a Set
$value = "5";
$set = ["1", "2", "3", "4"];
if (!in_array($value, $set)) {
    echo "Validation Failed: Inclusion in Set <br />";
}

// Regex Match
$value = "nikhil";
if (preg_match("/$value/", "Welcome To nikhil patidar")) {
    echo "A match was found <br />";
} else {
    echo "A match was not found <br />";
}

// Email format check
$value = "a@a";
if (!preg_match("/@/", $value)) {
    echo "Validation Failed: Email <br />";
}
?>
</body>
</html>
```

---

## üìö References

* [PHP Manual ‚Äì filter\_var()](https://www.php.net/manual/en/function.filter-var.php)
* [PHP Manual ‚Äì PDO](https://www.php.net/manual/en/book.pdo.php)
* [PHP Manual ‚Äì preg\_match()](https://www.php.net/manual/en/function.preg-match.php)

---

