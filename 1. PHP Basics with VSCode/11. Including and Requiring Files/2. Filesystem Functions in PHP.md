

## üìå What are Filesystem Functions?

Filesystem functions are **built-in PHP functions** used to work with files and directories on a server. They allow reading, writing, copying, moving, deleting, and managing file/folder information.

---
## üìÅ PHP Filesystem Functions

üîó **More functions on W3Schools:**
[https://www.w3schools.com/php/php\_ref\_filesystem.asp](https://www.w3schools.com/php/php_ref_filesystem.asp)

---

### üß† Why Use Them?

* Handling user uploads
* Dynamically managing content
* Performing automated backups
* Building CMSs or file managers

---

### üìö Common Filesystem Functions

| Function                                     | Description                                 | Example                                  |
| -------------------------------------------- | ------------------------------------------- | ---------------------------------------- |
| `readfile()`                                 | Reads a file and outputs it directly        | `echo readfile("file.txt");`             |
| `fopen()`, `fread()`, `fwrite()`, `fclose()` | Low-level file operations                   | `$f = fopen("file.txt", "r");`           |
| `file_get_contents()`                        | Reads entire file into a string             | `$data = file_get_contents("file.txt");` |
| `file_put_contents()`                        | Writes a string to a file                   | `file_put_contents("file.txt", $data);`  |
| `mkdir()`                                    | Creates a directory                         | `mkdir("new_dir");`                      |
| `rmdir()`                                    | Deletes a directory                         | `rmdir("old_dir");`                      |
| `unlink()`                                   | Deletes a file                              | `unlink("file.txt");`                    |
| `copy()`                                     | Copies a file                               | `copy("file1.txt", "file2.txt");`        |
| `rename()`                                   | Renames or moves file/directory             | `rename("old.txt", "new.txt");`          |
| `file_exists()`                              | Checks if a file or directory exists        | `file_exists("file.txt");`               |
| `filesize()`                                 | Gets file size in bytes                     | `echo filesize("file.txt");`             |
| `filetype()`                                 | Returns type (file, dir)                    | `echo filetype("file.txt");`             |
| `realpath()`                                 | Gets absolute path                          | `echo realpath("file.txt");`             |
| `pathinfo()`                                 | Returns file info (dirname, basename, etc.) | `print_r(pathinfo("file.txt"));`         |
| `basename()`                                 | Returns filename                            | `echo basename("file.txt");`             |
| `dirname()`                                  | Returns directory path                      | `echo dirname("file.txt");`              |

---

### üß™ Example Use Cases

**1. Create a new folder**

```php
mkdir("uploads");
```

**2. Copy a file**

```php
copy("demo1.txt", "backup/demo1.txt");
```

**3. Delete a file if it exists**

```php
if (file_exists("old.txt")) {
    unlink("old.txt");
}
```

**4. Read contents of a file**

```php
$content = file_get_contents("notes.txt");
echo $content;
```

**5. Get detailed file info**

```php
print_r(pathinfo("demo1.txt"));
```

---

### üß™ Example: Checking and Renaming a File

```php
<?php
$file = "demo1.txt";
$newFile = "demo2.txt";

if (file_exists($file)) {
    rename($file, $newFile);
    echo "File renamed!";
} else {
    echo "File not found.";
}
?>
```

---
## ‚öôÔ∏è Permissions and Ownership (Linux)

```bash
chown -R www-data:www-data /var/www/html/php
```
```bash
chmod -R 777 /var/www/html/php
```
---

## üìÑ Creating Files

### 1. Using `fopen()` and `fclose()`
```
create-file.php
```

```php
<?php
$filename = "newfile.txt";
$file = fopen($filename, 'w');
if ($file) {
    fwrite($file, "Hello, this is a new file!\n");
    fclose($file);
    echo "File created successfully.";
} else {
    echo "Failed to create the file.";
}
?>
```

### 2. Using `file_put_contents()`
```
create-file2.php
```
```php
<?php
$filename = 'newfile1.txt';
$content = "Hello, this file was created using file_put_contents.";
$result = file_put_contents($filename, $content);

if ($result !== false) {
    echo 'File created and content written successfully.';
} else {
    echo 'Failed to create the file.';
}
?>
```

### 3. Create Empty File with `touch()`
```
create-file3.php
```
```php
<?php
$filename = "emptyfile.txt";
if (touch($filename)) {
    echo "Empty file created successfully.";
} else {
    echo "Failed to create the file.";
}
?>
```

---

### 4. Example: `filesystem_functions.php`
```
filesystem_functions.php
```
```ini
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Filesystem Functions</title>
</head>
<body>

<?php
// Examples:
//echo readfile("Mission Sindhoor");

mkdir("hacker");
//mkdir("dir1/dir2", 0777, true);

// echo filesize("hacker");
// echo filetype("hacker");
// echo filetype("hacker");

// echo realpath("hacker");
// print_r(pathinfo("hacker"));
// print_r(pathinfo(realpath("hacker")));

// echo pathinfo("hacker", PATHINFO_DIRNAME);
// echo pathinfo("hacker", PATHINFO_BASENAME);
// echo pathinfo("hacker", PATHINFO_EXTENSION);
// echo pathinfo("hacker", PATHINFO_FILENAME);

// echo basename("hacker");
// echo basename("hacker", ".txt");

// echo dirname(realpath("hacker"));
// echo dirname(realpath("hacker"), 2); // grandparent directory
?>
</body>
</html>
```

---

### 5. Example: `filesystem-functions2.php`

```
filesystem-functions2.php
```

```ini
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Filesystem Functions 2</title>
</head>
<body>
<?php
$file1 = "newfile1.txt";

// Check if file exists before reading
if (file_exists($file1)) {
    echo readfile($file1);
} else {
    echo "File Not Exists";
}

// Copy file safely
/*
$file2 = "dir1/" . $file1;
if (file_exists($file1)) {
    copy($file1, $file2);
} else {
    echo "File Not Exists";
}
*/

// Rename file safely
/*
if (file_exists("dir1/demo1.txt")) {
    rename("dir1/demo1.txt", "dir1/demo2.txt");
} else {
    echo "File Not Exists";
}
*/

// Delete file safely
/*
if (file_exists("dir1/demo1.txt")) {
    unlink("dir1/demo1.txt");
} else {
    echo "File Not Exists";
}
*/
?>
</body>
</html>
```

---

### üìù Best Practices

* ‚úÖ Always check if files exist using `file_exists()`.
* ‚úÖ Use absolute paths with `realpath()` to avoid confusion.
* ‚ö†Ô∏è Be cautious with `unlink()` ‚Äî deletion is permanent.
* üîê Ensure proper file permissions on the server.
* üß∞ Use `fopen()`/`fclose()` when low-level control is needed.


---

